# slurm.conf - Slurm configuration file
# Generated by Ansible - DO NOT EDIT MANUALLY
#
# See slurm.conf(5) for more information.

#
# Cluster Identity
#
ClusterName={{ slurm_cluster_name }}

#
# Controller Configuration
#
SlurmctldHost={{ slurm_controller_hostname }}
{% if slurm_backup_controller_hostname | length > 0 %}
SlurmctldHost={{ slurm_backup_controller_hostname }}
{% endif %}

#
# Ports
#
SlurmctldPort={{ slurm_slurmctld_port }}
SlurmdPort={{ slurm_slurmd_port }}

#
# Directories
#
SlurmdSpoolDir={{ slurm_spool_dir }}/slurmd
StateSaveLocation={{ slurm_state_dir }}
SlurmctldLogFile={{ slurm_log_dir }}/slurmctld.log
SlurmdLogFile={{ slurm_log_dir }}/slurmd.log
SlurmctldPidFile={{ slurm_pid_dir }}/slurmctld.pid
SlurmdPidFile={{ slurm_pid_dir }}/slurmd.pid

#
# Authentication
#
AuthType={{ slurm_auth_type }}
CredType={{ slurm_cred_type }}

#
# Scheduler
#
SchedulerType={{ slurm_scheduler_type }}
SelectType={{ slurm_select_type }}
SelectTypeParameters={{ slurm_select_type_parameters }}

#
# Process Tracking
#
ProctrackType={{ slurm_proctrack_type }}
TaskPlugin={{ slurm_task_plugin }}

#
# Timers and Timeouts
#
SlurmctldTimeout={{ slurm_slurmctld_timeout }}
SlurmdTimeout={{ slurm_slurmd_timeout }}
ReturnToService={{ slurm_return_to_service }}
InactiveLimit={{ slurm_inactive_limit }}
KillWait={{ slurm_kill_wait }}
MinJobAge={{ slurm_min_job_age }}
Waittime={{ slurm_wait_time }}

#
# Logging
#
SlurmctldDebug={{ slurm_slurmctld_debug }}
SlurmdDebug={{ slurm_slurmd_debug }}

#
# Resource Limits
#
DefMemPerCPU={{ slurm_def_mem_per_cpu }}
{% if slurm_max_mem_per_cpu > 0 %}
MaxMemPerCPU={{ slurm_max_mem_per_cpu }}
{% endif %}

#
# Accounting
#
{% if slurm_accounting_enabled %}
AccountingStorageType={{ slurm_accounting_storage_type }}
AccountingStorageHost={{ slurm_db_host }}
AccountingStorageUser={{ slurm_db_user }}
AccountingStoragePass={{ slurm_db_password }}
{% else %}
AccountingStorageType=accounting_storage/none
{% endif %}
JobAcctGatherType=jobacct_gather/cgroup

#
# Compute Nodes
#
{% for node in slurm_compute_nodes %}
NodeName={{ node.name }} CPUs={{ node.cpus | default(slurm_default_cpus) }} RealMemory={{ node.memory | default(slurm_default_memory) }} State={{ node.state | default(slurm_default_state) }}
{% endfor %}

#
# Partitions
#
PartitionName={{ slurm_partition_name }} Nodes={% for node in slurm_compute_nodes %}{{ node.name }}{% if not loop.last %},{% endif %}{% endfor %} Default={{ slurm_partition_default }} MaxTime={{ slurm_partition_max_time }} State={{ slurm_partition_state }}
