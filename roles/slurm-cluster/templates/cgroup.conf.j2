# cgroup.conf - Slurm cgroup configuration
# Generated by Ansible - DO NOT EDIT MANUALLY
#
# See cgroup.conf(5) for more information.

# Enable cgroup plugin
CgroupPlugin=autodetect

# Constrain CPU cores to job allocation
ConstrainCores=yes

# Constrain RAM to job allocation
ConstrainRAMSpace=yes

# Swap space constraint (recommended: yes for production)
ConstrainSwapSpace={{ 'yes' if slurm_cgroup_constrain_swap else 'no' }}

{% if slurm_cgroup_memory_swappiness | string | length > 0 %}
# Memory swappiness (0-100, lower = less swapping)
MemorySwappiness={{ slurm_cgroup_memory_swappiness }}
{% endif %}

# Constrain devices
ConstrainDevices=yes
AllowedDevicesFile=/etc/slurm/cgroup_allowed_devices_file.conf
