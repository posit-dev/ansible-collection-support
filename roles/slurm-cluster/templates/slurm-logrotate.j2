# Slurm log rotation configuration
# Generated by Ansible - DO NOT EDIT MANUALLY

{{ slurm_log_dir }}/*.log {
    {{ slurm_logrotate_frequency }}
    rotate {{ slurm_logrotate_rotate }}
    missingok
    notifempty
{% if slurm_logrotate_compress %}
    compress
    delaycompress
{% endif %}
    create 0640 slurm slurm
    sharedscripts
    postrotate
{% if slurm_node_role == 'controller' %}
        systemctl reload {{ slurm_controller_service }} > /dev/null 2>&1 || true
{% else %}
        systemctl reload {{ slurm_compute_service }} > /dev/null 2>&1 || true
{% endif %}
    endscript
}

{{ slurm_munge_log_dir }}/*.log {
    {{ slurm_logrotate_frequency }}
    rotate {{ slurm_logrotate_rotate }}
    missingok
    notifempty
{% if slurm_logrotate_compress %}
    compress
    delaycompress
{% endif %}
    create 0640 munge munge
    sharedscripts
    postrotate
        systemctl reload {{ slurm_munge_service }} > /dev/null 2>&1 || true
    endscript
}
